-- LocalScript (StarterPlayerScripts)
-- Universal Teleport System [MOBILE + PC]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character, humanoid, hrp

local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled

-- Teleport settings
local savedLocations = {}
local MAX_LOCATIONS = 10
local antiTPBack = true
local tpMethod = "cframe" -- cframe, tween, velocity

local function setupCharacter(char)
	character = char
	humanoid = char:WaitForChild("Humanoid")
	hrp = char:FindFirstChild("HumanoidRootPart") or char:WaitForChild("HumanoidRootPart")
end

if player.Character then setupCharacter(player.Character) end
player.CharacterAdded:Connect(setupCharacter)

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "UniversalTeleportUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Tool/Inventory style button (bottom right like mobile tools)
local toolBtn = Instance.new("TextButton")
toolBtn.Size = UDim2.new(0, 70, 0, 70)
toolBtn.Position = UDim2.new(1, -85, 1, -85)
toolBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
toolBtn.BorderSizePixel = 0
toolBtn.Text = ""
toolBtn.ZIndex = 5
toolBtn.Active = true
toolBtn.Parent = gui

local toolCorner = Instance.new("UICorner")
toolCorner.CornerRadius = UDim.new(0.2, 0)
toolCorner.Parent = toolBtn

-- Tool icon
local toolIcon = Instance.new("ImageLabel")
toolIcon.Size = UDim2.new(0.6, 0, 0.6, 0)
toolIcon.Position = UDim2.new(0.2, 0, 0.15, 0)
toolIcon.BackgroundTransparency = 1
toolIcon.Image = "rbxassetid://3926305904" -- Teleport icon
toolIcon.ImageColor3 = Color3.fromRGB(100, 200, 255)
toolIcon.ScaleType = Enum.ScaleType.Fit
toolIcon.Parent = toolBtn

-- Tool label
local toolLabel = Instance.new("TextLabel")
toolLabel.Size = UDim2.new(1, 0, 0, 18)
toolLabel.Position = UDim2.new(0, 0, 1, -20)
toolLabel.BackgroundTransparency = 1
toolLabel.Text = "TELEPORT"
toolLabel.Font = Enum.Font.GothamBold
toolLabel.TextSize = 9
toolLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
toolLabel.Parent = toolBtn

-- Notification badge (for saved locations count)
local badge = Instance.new("Frame")
badge.Size = UDim2.new(0, 22, 0, 22)
badge.Position = UDim2.new(1, -8, 0, -8)
badge.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
badge.BorderSizePixel = 0
badge.ZIndex = 6
badge.Parent = toolBtn

local badgeCorner = Instance.new("UICorner")
badgeCorner.CornerRadius = UDim.new(0.5, 0)
badgeCorner.Parent = badge

local badgeLabel = Instance.new("TextLabel")
badgeLabel.Size = UDim2.new(1, 0, 1, 0)
badgeLabel.BackgroundTransparency = 1
badgeLabel.Text = "0"
badgeLabel.Font = Enum.Font.GothamBold
badgeLabel.TextSize = 11
badgeLabel.TextColor3 = Color3.new(1, 1, 1)
badgeLabel.ZIndex = 7
badgeLabel.Parent = badge

-- Main panel (slides in from right like inventory)
local mainPanel = Instance.new("Frame")
mainPanel.Size = UDim2.new(0, 340, 0, 500)
mainPanel.Position = UDim2.new(1, 0, 0.5, -250) -- Off-screen initially
mainPanel.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainPanel.BorderSizePixel = 0
mainPanel.ClipsDescendants = true
mainPanel.Visible = false
mainPanel.ZIndex = 2
mainPanel.Parent = gui

local panelCorner = Instance.new("UICorner")
panelCorner.CornerRadius = UDim.new(0, 12)
panelCorner.Parent = mainPanel

-- Panel shadow effect
local shadow = Instance.new("ImageLabel")
shadow.Size = UDim2.new(1, 30, 1, 30)
shadow.Position = UDim2.new(0, -15, 0, -15)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.ImageTransparency = 0.7
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.ZIndex = 1
shadow.Parent = mainPanel

-- Top bar
local topBar = Instance.new("Frame")
topBar.Size = UDim2.new(1, 0, 0, 50)
topBar.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
topBar.BorderSizePixel = 0
topBar.ZIndex = 3
topBar.Parent = mainPanel

local topCorner = Instance.new("UICorner")
topCorner.CornerRadius = UDim.new(0, 12)
topCorner.Parent = topBar

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -100, 1, 0)
titleLabel.Position = UDim2.new(0, 15, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "ðŸŒ TELEPORT"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 18
titleLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 4
titleLabel.Parent = topBar

-- Close button
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 40, 0, 40)
closeBtn.Position = UDim2.new(1, -45, 0, 5)
closeBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
closeBtn.Text = "âœ•"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1, 1, 1)
closeBtn.ZIndex = 4
closeBtn.Parent = topBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 8)
closeCorner.Parent = closeBtn

-- Action buttons container
local actionBar = Instance.new("Frame")
actionBar.Size = UDim2.new(1, -20, 0, 45)
actionBar.Position = UDim2.new(0, 10, 0, 60)
actionBar.BackgroundTransparency = 1
actionBar.ZIndex = 3
actionBar.Parent = mainPanel

-- Save Current Location button
local saveBtn = Instance.new("TextButton")
saveBtn.Size = UDim2.new(0.48, 0, 1, 0)
saveBtn.Position = UDim2.new(0, 0, 0, 0)
saveBtn.BackgroundColor3 = Color3.fromRGB(80, 200, 120)
saveBtn.Text = "ðŸ’¾ SAVE"
saveBtn.Font = Enum.Font.GothamBold
saveBtn.TextSize = 14
saveBtn.TextColor3 = Color3.new(1, 1, 1)
saveBtn.ZIndex = 4
saveBtn.Parent = actionBar

local saveCorner = Instance.new("UICorner")
saveCorner.CornerRadius = UDim.new(0, 8)
saveCorner.Parent = saveBtn

-- Teleport to Mouse button
local mouseTPBtn = Instance.new("TextButton")
mouseTPBtn.Size = UDim2.new(0.48, 0, 1, 0)
mouseTPBtn.Position = UDim2.new(0.52, 0, 0, 0)
mouseTPBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
mouseTPBtn.Text = "ðŸŽ¯ MOUSE"
mouseTPBtn.Font = Enum.Font.GothamBold
mouseTPBtn.TextSize = 14
mouseTPBtn.TextColor3 = Color3.new(1, 1, 1)
mouseTPBtn.ZIndex = 4
mouseTPBtn.Parent = actionBar

local mouseCorner = Instance.new("UICorner")
mouseCorner.CornerRadius = UDim.new(0, 8)
mouseCorner.Parent = mouseTPBtn

-- Settings bar
local settingsBar = Instance.new("Frame")
settingsBar.Size = UDim2.new(1, -20, 0, 35)
settingsBar.Position = UDim2.new(0, 10, 0, 115)
settingsBar.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
settingsBar.BorderSizePixel = 0
settingsBar.ZIndex = 3
settingsBar.Parent = mainPanel

local settingsCorner = Instance.new("UICorner")
settingsCorner.CornerRadius = UDim.new(0, 8)
settingsCorner.Parent = settingsBar

-- Anti TP Back toggle
local antiTPBtn = Instance.new("TextButton")
antiTPBtn.Size = UDim2.new(0.48, -5, 1, -6)
antiTPBtn.Position = UDim2.new(0, 3, 0, 3)
antiTPBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
antiTPBtn.Text = "âœ“ Anti-Back"
antiTPBtn.Font = Enum.Font.Gotham
antiTPBtn.TextSize = 11
antiTPBtn.TextColor3 = Color3.new(1, 1, 1)
antiTPBtn.ZIndex = 4
antiTPBtn.Parent = settingsBar

local antiCorner = Instance.new("UICorner")
antiCorner.CornerRadius = UDim.new(0, 6)
antiCorner.Parent = antiTPBtn

-- Method selector
local methodBtn = Instance.new("TextButton")
methodBtn.Size = UDim2.new(0.48, -5, 1, -6)
methodBtn.Position = UDim2.new(0.52, 2, 0, 3)
methodBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
methodBtn.Text = "âš¡ CFrame"
methodBtn.Font = Enum.Font.Gotham
methodBtn.TextSize = 11
methodBtn.TextColor3 = Color3.new(1, 1, 1)
methodBtn.ZIndex = 4
methodBtn.Parent = settingsBar

local methodCorner = Instance.new("UICorner")
methodCorner.CornerRadius = UDim.new(0, 6)
methodCorner.Parent = methodBtn

-- Saved locations label
local locationsLabel = Instance.new("TextLabel")
locationsLabel.Size = UDim2.new(1, -20, 0, 25)
locationsLabel.Position = UDim2.new(0, 10, 0, 160)
locationsLabel.BackgroundTransparency = 1
locationsLabel.Text = "ðŸ“ SAVED LOCATIONS (0/10)"
locationsLabel.Font = Enum.Font.GothamBold
locationsLabel.TextSize = 12
locationsLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
locationsLabel.TextXAlignment = Enum.TextXAlignment.Left
locationsLabel.ZIndex = 3
locationsLabel.Parent = mainPanel

-- Locations scroll frame
local locationsScroll = Instance.new("ScrollingFrame")
locationsScroll.Size = UDim2.new(1, -20, 1, -200)
locationsScroll.Position = UDim2.new(0, 10, 0, 190)
locationsScroll.BackgroundColor3 = Color3.fromRGB(20, 20, 28)
locationsScroll.BorderSizePixel = 0
locationsScroll.ScrollBarThickness = 6
locationsScroll.ZIndex = 3
locationsScroll.Parent = mainPanel

local scrollCorner = Instance.new("UICorner")
scrollCorner.CornerRadius = UDim.new(0, 8)
scrollCorner.Parent = locationsScroll

local scrollLayout = Instance.new("UIListLayout")
scrollLayout.SortOrder = Enum.SortOrder.LayoutOrder
scrollLayout.Padding = UDim.new(0, 5)
scrollLayout.Parent = locationsScroll

local scrollPadding = Instance.new("UIPadding")
scrollPadding.PaddingTop = UDim.new(0, 5)
scrollPadding.PaddingLeft = UDim.new(0, 5)
scrollPadding.PaddingRight = UDim.new(0, 5)
scrollPadding.PaddingBottom = UDim.new(0, 5)
scrollPadding.Parent = locationsScroll

-- Panel open/close state
local isPanelOpen = false

-- Tool button click
toolBtn.Activated:Connect(function()
	isPanelOpen = not isPanelOpen
	
	if isPanelOpen then
		mainPanel.Visible = true
		-- Slide in from right
		mainPanel.Position = UDim2.new(1, 0, 0.5, -250)
		TweenService:Create(mainPanel, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
			Position = UDim2.new(1, -350, 0.5, -250)
		}):Play()
		
		-- Pulse effect on tool button
		TweenService:Create(toolBtn, TweenInfo.new(0.15), {
			Size = UDim2.new(0, 75, 0, 75),
			BackgroundColor3 = Color3.fromRGB(50, 150, 255)
		}):Play()
	else
		-- Slide out to right
		TweenService:Create(mainPanel, TweenInfo.new(0.25, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
			Position = UDim2.new(1, 0, 0.5, -250)
		}):Play()
		
		task.wait(0.25)
		mainPanel.Visible = false
		
		-- Reset tool button
		TweenService:Create(toolBtn, TweenInfo.new(0.15), {
			Size = UDim2.new(0, 70, 0, 70),
			BackgroundColor3 = Color3.fromRGB(35, 35, 45)
		}):Play()
	end
end)

-- Close button
closeBtn.Activated:Connect(function()
	isPanelOpen = false
	
	TweenService:Create(mainPanel, TweenInfo.new(0.25, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
		Position = UDim2.new(1, 0, 0.5, -250)
	}):Play()
	
	task.wait(0.25)
	mainPanel.Visible = false
	
	TweenService:Create(toolBtn, TweenInfo.new(0.15), {
		Size = UDim2.new(0, 70, 0, 70),
		BackgroundColor3 = Color3.fromRGB(35, 35, 45)
	}):Play()
end)

-- Anti TP Back toggle
antiTPBtn.Activated:Connect(function()
	antiTPBack = not antiTPBack
	
	if antiTPBack then
		antiTPBtn.Text = "âœ“ Anti-Back"
		antiTPBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
	else
		antiTPBtn.Text = "âœ• Anti-Back"
		antiTPBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
	end
end)

-- Method selector
methodBtn.Activated:Connect(function()
	if tpMethod == "cframe" then
		tpMethod = "tween"
		methodBtn.Text = "âœ¨ Tween"
		methodBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 255)
	elseif tpMethod == "tween" then
		tpMethod = "velocity"
		methodBtn.Text = "ðŸš€ Velocity"
		methodBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 50)
	else
		tpMethod = "cframe"
		methodBtn.Text = "âš¡ CFrame"
		methodBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 255)
	end
end)

-- Update locations label
local function updateLocationsLabel()
	locationsLabel.Text = "ðŸ“ SAVED LOCATIONS (" .. #savedLocations .. "/" .. MAX_LOCATIONS .. ")"
	badgeLabel.Text = tostring(#savedLocations)
end

-- Create location entry
local function createLocationEntry(location, index)
	local entry = Instance.new("Frame")
	entry.Size = UDim2.new(1, -10, 0, 60)
	entry.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
	entry.BorderSizePixel = 0
	entry.LayoutOrder = index
	entry.ZIndex = 4
	entry.Parent = locationsScroll
	
	local entryCorner = Instance.new("UICorner")
	entryCorner.CornerRadius = UDim.new(0, 8)
	entryCorner.Parent = entry
	
	-- Location name
	local nameLabel = Instance.new("TextLabel")
	nameLabel.Size = UDim2.new(1, -90, 0, 20)
	nameLabel.Position = UDim2.new(0, 10, 0, 5)
	nameLabel.BackgroundTransparency = 1
	nameLabel.Text = location.name
	nameLabel.Font = Enum.Font.GothamBold
	nameLabel.TextSize = 13
	nameLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
	nameLabel.TextXAlignment = Enum.TextXAlignment.Left
	nameLabel.ZIndex = 5
	nameLabel.Parent = entry
	
	-- Position info
	local posLabel = Instance.new("TextLabel")
	posLabel.Size = UDim2.new(1, -90, 0, 15)
	posLabel.Position = UDim2.new(0, 10, 0, 25)
	posLabel.BackgroundTransparency = 1
	posLabel.Text = string.format("X: %.0f Y: %.0f Z: %.0f", location.position.X, location.position.Y, location.position.Z)
	posLabel.Font = Enum.Font.Gotham
	posLabel.TextSize = 10
	posLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
	posLabel.TextXAlignment = Enum.TextXAlignment.Left
	posLabel.ZIndex = 5
	posLabel.Parent = entry
	
	-- Time saved
	local timeLabel = Instance.new("TextLabel")
	timeLabel.Size = UDim2.new(1, -90, 0, 15)
	timeLabel.Position = UDim2.new(0, 10, 0, 40)
	timeLabel.BackgroundTransparency = 1
	timeLabel.Text = "â° " .. location.time
	timeLabel.Font = Enum.Font.Gotham
	timeLabel.TextSize = 9
	timeLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
	timeLabel.TextXAlignment = Enum.TextXAlignment.Left
	timeLabel.ZIndex = 5
	timeLabel.Parent = entry
	
	-- Teleport button
	local tpBtn = Instance.new("TextButton")
	tpBtn.Size = UDim2.new(0, 35, 0, 25)
	tpBtn.Position = UDim2.new(1, -75, 0, 10)
	tpBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 255)
	tpBtn.Text = "â†’"
	tpBtn.Font = Enum.Font.GothamBold
	tpBtn.TextSize = 16
	tpBtn.TextColor3 = Color3.new(1, 1, 1)
	tpBtn.ZIndex = 5
	tpBtn.Parent = entry
	
	local tpCorner = Instance.new("UICorner")
	tpCorner.CornerRadius = UDim.new(0, 6)
	tpCorner.Parent = tpBtn
	
	-- Delete button
	local delBtn = Instance.new("TextButton")
	delBtn.Size = UDim2.new(0, 35, 0, 25)
	delBtn.Position = UDim2.new(1, -35, 0, 10)
	delBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
	delBtn.Text = "âœ•"
	delBtn.Font = Enum.Font.GothamBold
	delBtn.TextSize = 14
	delBtn.TextColor3 = Color3.new(1, 1, 1)
	delBtn.ZIndex = 5
	delBtn.Parent = entry
	
	local delCorner = Instance.new("UICorner")
	delCorner.CornerRadius = UDim.new(0, 6)
	delCorner.Parent = delBtn
	
	-- Teleport action
	tpBtn.Activated:Connect(function()
		teleportTo(location.position)
		
		-- Visual feedback
		TweenService:Create(tpBtn, TweenInfo.new(0.1), {
			BackgroundColor3 = Color3.fromRGB(80, 255, 100)
		}):Play()
		task.wait(0.2)
		TweenService:Create(tpBtn, TweenInfo.new(0.1), {
			BackgroundColor3 = Color3.fromRGB(100, 200, 255)
		}):Play()
	end)
	
	-- Delete action
	delBtn.Activated:Connect(function()
		table.remove(savedLocations, index)
		refreshLocationsList()
		updateLocationsLabel()
	end)
end

-- Refresh locations list
function refreshLocationsList()
	for _, child in ipairs(locationsScroll:GetChildren()) do
		if child:IsA("Frame") then
			child:Destroy()
		end
	end
	
	for i, location in ipairs(savedLocations) do
		createLocationEntry(location, i)
	end
	
	locationsScroll.CanvasSize = UDim2.new(0, 0, 0, #savedLocations * 65)
end

-- Save current location
saveBtn.Activated:Connect(function()
	if not hrp then
		saveBtn.Text = "âŒ NO CHAR"
		task.wait(1)
		saveBtn.Text = "ðŸ’¾ SAVE"
		return
	end
	
	if #savedLocations >= MAX_LOCATIONS then
		saveBtn.Text = "âš ï¸ FULL"
		task.wait(1)
		saveBtn.Text = "ðŸ’¾ SAVE"
		return
	end
	
	local currentPos = hrp.Position
	local timestamp = os.date("%H:%M:%S")
	
	table.insert(savedLocations, {
		name = "Location " .. (#savedLocations + 1),
		position = currentPos,
		time = timestamp
	})
	
	refreshLocationsList()
	updateLocationsLabel()
	
	-- Visual feedback
	saveBtn.Text = "âœ“ SAVED"
	saveBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
	task.wait(0.5)
	saveBtn.Text = "ðŸ’¾ SAVE"
	saveBtn.BackgroundColor3 = Color3.fromRGB(80, 200, 120)
end)

-- Teleport to mouse
mouseTPBtn.Activated:Connect(function()
	local mouse = player:GetMouse()
	local targetPos = mouse.Hit.Position
	
	if targetPos then
		teleportTo(targetPos)
		
		-- Visual feedback
		mouseTPBtn.Text = "âœ“ TP"
		mouseTPBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
		task.wait(0.5)
		mouseTPBtn.Text = "ðŸŽ¯ MOUSE"
		mouseTPBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
	end
end)

-- TELEPORT FUNCTION (ANTI TP-BACK PROTECTION)
function teleportTo(targetPos)
	if not hrp or not humanoid then return end
	
	local targetCFrame = CFrame.new(targetPos + Vector3.new(0, 3, 0))
	
	if tpMethod == "cframe" then
		-- INSTANT CFRAME (with anti tp-back)
		if antiTPBack then
			-- Disable character physics temporarily
			for _, part in ipairs(character:GetDescendants()) do
				if part:IsA("BasePart") then
					part.Anchored = true
				end
			end
		end
		
		hrp.CFrame = targetCFrame
		
		if antiTPBack then
			task.wait(0.1)
			-- Re-enable physics
			for _, part in ipairs(character:GetDescendants()) do
				if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
					part.Anchored = false
				end
			end
			hrp.Anchored = false
		end
		
	elseif tpMethod == "tween" then
		-- SMOOTH TWEEN
		local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
		local tween = TweenService:Create(hrp, tweenInfo, {CFrame = targetCFrame})
		
		if antiTPBack then
			humanoid.PlatformStand = true
		end
		
		tween:Play()
		tween.Completed:Wait()
		
		if antiTPBack then
			humanoid.PlatformStand = false
		end
		
	elseif tpMethod == "velocity" then
		-- VELOCITY-BASED (looks more natural)
		local direction = (targetPos - hrp.Position).Unit
		local distance = (targetPos - hrp.Position).Magnitude
		
		local bodyVelocity = Instance.new("BodyVelocity")
		bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
		bodyVelocity.Velocity = direction * math.min(distance * 2, 200)
		bodyVelocity.Parent = hrp
		
		if antiTPBack then
			humanoid.PlatformStand = true
		end
		
		task.wait(0.5)
		bodyVelocity:Destroy()
		
		if antiTPBack then
			humanoid.PlatformStand = false
		end
	end
end

-- Anti TP-back protection loop
if antiTPBack then
	spawn(function()
		local lastPos = nil
		while true do
			wait(0.1)
			if hrp and antiTPBack then
				if lastPos and (hrp.Position - lastPos).Magnitude > 100 then
					-- Large position change detected, lock position briefly
					hrp.Anchored = true
					task.wait(0.05)
					hrp.Anchored = false
				end
				lastPos = hrp.Position
			end
		end
	end)
end

print("==========================================")
print("Universal Teleport System [MOBILE + PC]")
print("==========================================")
print("âœ… Tool-style GUI (bottom right)")
print("âœ… Slide-in inventory panel")
print("âœ… Save up to 10 locations")
print("âœ… Teleport to mouse position")
print("âœ… Anti TP-back protection")
print("âœ… 3 TP methods: CFrame/Tween/Velocity")
print("==========================================")
print("ðŸ’¡ Works even if backpack is hidden!")
print("==========================================")
