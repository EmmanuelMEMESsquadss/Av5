-- LocalScript (StarterPlayerScripts)
-- Multi-Universal Invisible [TRUE INVISIBILITY - SERVER SIDE]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character, humanoid, hrp

local invisEnabled = false
local currentMethod = "shrink"
local antiKickEnabled = true

local function setupCharacter(char)
	character = char
	humanoid = char:WaitForChild("Humanoid")
	hrp = char:FindFirstChild("HumanoidRootPart") or char:WaitForChild("HumanoidRootPart")
end

if player.Character then setupCharacter(player.Character) end
player.CharacterAdded:Connect(setupCharacter)

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "InvisibleUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Minimized Button
local miniBtn = Instance.new("TextButton")
miniBtn.Size = UDim2.new(0, 50, 0, 50)
miniBtn.Position = UDim2.new(0.85, -50, 0.5, -25)
miniBtn.BackgroundColor3 = Color3.fromRGB(150, 100, 255)
miniBtn.BorderSizePixel = 0
miniBtn.Font = Enum.Font.GothamBold
miniBtn.TextSize = 20
miniBtn.TextColor3 = Color3.new(1, 1, 1)
miniBtn.Text = "+"
miniBtn.Visible = false
miniBtn.ZIndex = 10
miniBtn.Active = true
miniBtn.Parent = gui

local miniBtnCorner = Instance.new("UICorner")
miniBtnCorner.CornerRadius = UDim.new(0.5, 0)
miniBtnCorner.Parent = miniBtn

local miniLabel = Instance.new("TextLabel")
miniLabel.Size = UDim2.new(1, 0, 0, 15)
miniLabel.Position = UDim2.new(0, 0, 1, 2)
miniLabel.BackgroundTransparency = 1
miniLabel.Text = "INVIS"
miniLabel.Font = Enum.Font.GothamBold
miniLabel.TextSize = 10
miniLabel.TextColor3 = Color3.fromRGB(150, 100, 255)
miniLabel.Parent = miniBtn

-- Main Container
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 180, 0, 340)
mainFrame.Position = UDim2.new(0.85, -180, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainFrame.BorderSizePixel = 0
mainFrame.Active = false
mainFrame.Parent = gui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Drag Handle
local dragHandle = Instance.new("Frame")
dragHandle.Size = UDim2.new(1, 0, 0, 35)
dragHandle.BackgroundTransparency = 1
dragHandle.Active = true
dragHandle.Parent = mainFrame

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -75, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "INVISIBLE"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 16
titleLabel.TextColor3 = Color3.fromRGB(150, 100, 255)
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = dragHandle

-- Method Selector Button (+ icon)
local methodBtn = Instance.new("TextButton")
methodBtn.Size = UDim2.new(0, 24, 0, 24)
methodBtn.Position = UDim2.new(1, -50, 0, 5)
methodBtn.Text = "+"
methodBtn.BackgroundColor3 = Color3.fromRGB(150, 100, 255)
methodBtn.TextColor3 = Color3.new(1, 1, 1)
methodBtn.Font = Enum.Font.GothamBold
methodBtn.TextSize = 18
methodBtn.ZIndex = 10
methodBtn.Parent = dragHandle

local methodCorner = Instance.new("UICorner")
methodCorner.CornerRadius = UDim.new(0.5, 0)
methodCorner.Parent = methodBtn

-- Minimize Button
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 20, 0, 20)
minimizeBtn.Position = UDim2.new(1, -25, 0, 7)
minimizeBtn.Text = "-"
minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 100)
minimizeBtn.TextColor3 = Color3.new(1, 1, 1)
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 20
minimizeBtn.ZIndex = 10
minimizeBtn.Parent = dragHandle

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0.5, 0)
minimizeCorner.Parent = minimizeBtn

-- Status Indicator
local statusDot = Instance.new("Frame")
statusDot.Size = UDim2.new(0, 10, 0, 10)
statusDot.Position = UDim2.new(1, -15, 0, 12)
statusDot.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
statusDot.BorderSizePixel = 0
statusDot.Parent = dragHandle

local dotCorner = Instance.new("UICorner")
dotCorner.CornerRadius = UDim.new(0.5, 0)
dotCorner.Parent = statusDot

-- Method Menu Container
local methodMenu = Instance.new("Frame")
methodMenu.Size = UDim2.new(0, 160, 0, 0)
methodMenu.Position = UDim2.new(1, 5, 0, 0)
methodMenu.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
methodMenu.BorderSizePixel = 0
methodMenu.ClipsDescendants = true
methodMenu.Visible = false
methodMenu.ZIndex = 11
methodMenu.Parent = mainFrame

local menuCorner = Instance.new("UICorner")
menuCorner.CornerRadius = UDim.new(0, 8)
menuCorner.Parent = methodMenu

-- Invisible Methods
local methods = {
	{name = "SHRINK", desc = "Tiny Size", id = "shrink", color = Color3.fromRGB(100, 150, 255)},
	{name = "UNDERGROUND", desc = "Below Map", id = "underground", color = Color3.fromRGB(150, 100, 255)},
	{name = "REMOVE PARTS", desc = "Delete Body", id = "remove", color = Color3.fromRGB(255, 100, 150)},
	{name = "HYBRID", desc = "Multi-Method", id = "hybrid", color = Color3.fromRGB(255, 150, 100)}
}

local methodButtons = {}

for i, method in ipairs(methods) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 32)
	btn.Position = UDim2.new(0, 5, 0, 5 + (i-1) * 37)
	btn.BackgroundColor3 = method.color
	btn.BackgroundTransparency = 0.2
	btn.BorderSizePixel = 0
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 11
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Text = method.name .. " ¬∑ " .. method.desc
	btn.ZIndex = 12
	btn.Parent = methodMenu
	
	local btnCorner = Instance.new("UICorner")
	btnCorner.CornerRadius = UDim.new(0, 6)
	btnCorner.Parent = btn
	
	-- Selection indicator
	local indicator = Instance.new("Frame")
	indicator.Size = UDim2.new(0, 3, 1, -6)
	indicator.Position = UDim2.new(0, 3, 0, 3)
	indicator.BackgroundColor3 = Color3.new(1, 1, 1)
	indicator.BorderSizePixel = 0
	indicator.Visible = (i == 1)
	indicator.ZIndex = 13
	indicator.Parent = btn
	
	local indCorner = Instance.new("UICorner")
	indCorner.CornerRadius = UDim.new(1, 0)
	indCorner.Parent = indicator
	
	methodButtons[i] = {button = btn, indicator = indicator, method = method}
	
	-- Method selection
	btn.Activated:Connect(function()
		currentMethod = method.id
		
		-- Update indicators
		for j, data in ipairs(methodButtons) do
			data.indicator.Visible = (j == i)
			TweenService:Create(data.button, TweenInfo.new(0.2), {
				BackgroundTransparency = (j == i) and 0.2 or 0.5
			}):Play()
		end
		
		-- Visual feedback
		TweenService:Create(btn, TweenInfo.new(0.1), {
			Size = UDim2.new(1, -8, 0, 32)
		}):Play()
		task.wait(0.1)
		TweenService:Create(btn, TweenInfo.new(0.1), {
			Size = UDim2.new(1, -10, 0, 32)
		}):Play()
		
		-- Reapply if active
		if invisEnabled then
			disableInvisibility()
			task.wait(0.1)
			enableInvisibility()
		end
	end)
end

-- Method menu toggle
local menuOpen = false
methodBtn.Activated:Connect(function()
	menuOpen = not menuOpen
	
	if menuOpen then
		methodMenu.Visible = true
		TweenService:Create(methodMenu, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
			Size = UDim2.new(0, 160, 0, 155)
		}):Play()
		TweenService:Create(methodBtn, TweenInfo.new(0.2), {
			Rotation = 45,
			BackgroundColor3 = Color3.fromRGB(206, 36, 36)
		}):Play()
	else
		TweenService:Create(methodMenu, TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
			Size = UDim2.new(0, 160, 0, 0)
		}):Play()
		TweenService:Create(methodBtn, TweenInfo.new(0.2), {
			Rotation = 0,
			BackgroundColor3 = Color3.fromRGB(150, 100, 255)
		}):Play()
		task.wait(0.2)
		methodMenu.Visible = false
	end
end)

-- Main Toggle Button
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(1, -20, 0, 40)
toggleBtn.Position = UDim2.new(0, 10, 0, 45)
toggleBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
toggleBtn.Text = "üëª DISABLED"
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 16
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Parent = mainFrame

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 8)
toggleCorner.Parent = toggleBtn

-- Anti-Kick Toggle
local antiKickBtn = Instance.new("TextButton")
antiKickBtn.Size = UDim2.new(1, -20, 0, 35)
antiKickBtn.Position = UDim2.new(0, 10, 0, 95)
antiKickBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
antiKickBtn.Text = "üõ°Ô∏è Anti-Kick: ON"
antiKickBtn.Font = Enum.Font.GothamBold
antiKickBtn.TextSize = 13
antiKickBtn.TextColor3 = Color3.new(1, 1, 1)
antiKickBtn.Parent = mainFrame

local antiKickCorner = Instance.new("UICorner")
antiKickCorner.CornerRadius = UDim.new(0, 8)
antiKickCorner.Parent = antiKickBtn

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -20, 0, 60)
statusLabel.Position = UDim2.new(0, 10, 0, 140)
statusLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
statusLabel.BorderSizePixel = 0
statusLabel.Text = "Status: Ready\nMethod: SHRINK\nTools: Functional"
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 11
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.TextYAlignment = Enum.TextYAlignment.Top
statusLabel.Parent = mainFrame

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusLabel

local statusPadding = Instance.new("UIPadding")
statusPadding.PaddingLeft = UDim.new(0, 8)
statusPadding.PaddingTop = UDim.new(0, 8)
statusPadding.Parent = statusLabel

-- Info Label
local infoLabel = Instance.new("TextLabel")
infoLabel.Size = UDim2.new(1, -20, 0, 120)
infoLabel.Position = UDim2.new(0, 10, 0, 210)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "‚ö†Ô∏è TRUE INVISIBILITY\n\n‚úÖ Others CAN'T see you\n‚úÖ Tools remain functional\n‚úÖ Can hit & attack\n‚úÖ Anti-kick protection"
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextSize = 9
infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
infoLabel.TextXAlignment = Enum.TextXAlignment.Left
infoLabel.TextYAlignment = Enum.TextYAlignment.Top
infoLabel.Parent = mainFrame

-- Dragging
local dragging = false
local dragStart, startPos

dragHandle.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

dragHandle.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		if dragging then
			local delta = input.Position - dragStart
			mainFrame.Position = UDim2.new(
				startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y
			)
		end
	end
end)

local miniDragging = false
local miniDragStart, miniStartPos

miniBtn.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		miniDragging = true
		miniDragStart = input.Position
		miniStartPos = miniBtn.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				miniDragging = false
			end
		end)
	end
end)

miniBtn.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		if miniDragging then
			local delta = input.Position - miniDragStart
			miniBtn.Position = UDim2.new(
				miniStartPos.X.Scale, miniStartPos.X.Offset + delta.X,
				miniStartPos.Y.Scale, miniStartPos.Y.Offset + delta.Y
			)
		end
	end
end)

-- Minimize/Maximize
local isMinimized = false

minimizeBtn.Activated:Connect(function()
	isMinimized = true
	TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
		Size = UDim2.new(0, 0, 0, 0)
	}):Play()
	task.wait(0.3)
	mainFrame.Visible = false
	miniBtn.Visible = true
	miniBtn.Size = UDim2.new(0, 0, 0, 0)
	TweenService:Create(miniBtn, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Size = UDim2.new(0, 50, 0, 50)
	}):Play()
end)

miniBtn.Activated:Connect(function()
	if not miniDragging then
		isMinimized = false
		TweenService:Create(miniBtn, TweenInfo.new(0.2, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
			Size = UDim2.new(0, 0, 0, 0)
		}):Play()
		task.wait(0.2)
		miniBtn.Visible = false
		mainFrame.Visible = true
		mainFrame.Size = UDim2.new(0, 0, 0, 0)
		TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
			Size = UDim2.new(0, 180, 0, 340)
		}):Play()
	end
end)

-- Anti-Kick Toggle
antiKickBtn.Activated:Connect(function()
	antiKickEnabled = not antiKickEnabled
	
	if antiKickEnabled then
		antiKickBtn.Text = "üõ°Ô∏è Anti-Kick: ON"
		antiKickBtn.BackgroundColor3 = Color3.fromRGB(80, 255, 100)
	else
		antiKickBtn.Text = "üõ°Ô∏è Anti-Kick: OFF"
		antiKickBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
	end
end)

-- INVISIBILITY SYSTEM FUNCTIONS
local originalSizes = {}
local removedParts = {}
local originalCFrame = nil
local noclipConnection = nil

-- METHOD 1: SHRINK (Size Manipulation - Server Replicated)
function applyShrink()
	if not character then return end
	
	for _, part in ipairs(character:GetDescendants()) do
		if part:IsA("BasePart") or part:IsA("MeshPart") then
			if part.Name ~= "HumanoidRootPart" then
				originalSizes[part] = part.Size
				part.Size = Vector3.new(0.001, 0.001, 0.001)
			end
		end
		
		-- Shrink accessories
		if part:IsA("Accessory") then
			local handle = part:FindFirstChild("Handle")
			if handle then
				originalSizes[handle] = handle.Size
				handle.Size = Vector3.new(0.001, 0.001, 0.001)
			end
		end
	end
	
	statusLabel.Text = "Status: ACTIVE (Shrink)\nMethod: Size = 0.001\nTools: Functional"
end

-- METHOD 2: UNDERGROUND (CFrame Below Map + Noclip)
function applyUnderground()
	if not character or not hrp then return end
	
	originalCFrame = hrp.CFrame
	
	-- Enable noclip
	noclipConnection = RunService.Stepped:Connect(function()
		if invisEnabled and character then
			for _, part in ipairs(character:GetDescendants()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		end
	end)
	
	-- Move underground
	hrp.CFrame = hrp.CFrame * CFrame.new(0, -500, 0)
	
	statusLabel.Text = "Status: ACTIVE (Underground)\nMethod: Y Position -500\nTools: Functional"
end

-- METHOD 3: REMOVE PARTS (Delete Body Parts - Most Effective!)
function applyRemoveParts()
	if not character then return end
	
	for _, part in ipairs(character:GetChildren()) do
		if (part:IsA("BasePart") or part:IsA("MeshPart")) and part.Name ~= "HumanoidRootPart" then
			removedParts[part.Name] = part:Clone()
			part:Destroy()
		end
		
		-- Remove accessories
		if part:IsA("Accessory") then
			removedParts[part.Name] = part:Clone()
			part:Destroy()
		end
	end
	
	statusLabel.Text = "Status: ACTIVE (Remove)\nMethod: Parts Deleted\nTools: Functional"
end

-- METHOD 4: HYBRID (Combination)
function applyHybrid()
	applyShrink()
	
	-- Also hide locally
	for _, part in ipairs(character:GetDescendants()) do
		if part:IsA("BasePart") or part:IsA("MeshPart") then
			part.Transparency = 1
		end
	end
	
	statusLabel.Text = "Status: ACTIVE (Hybrid)\nMethod: Shrink + Transparency\nTools: Functional"
end

-- ENABLE INVISIBILITY
function enableInvisibility()
	if not character then return end
	
	if currentMethod == "shrink" then
		applyShrink()
	elseif currentMethod == "underground" then
		applyUnderground()
	elseif currentMethod == "remove" then
		applyRemoveParts()
	elseif currentMethod == "hybrid" then
		applyHybrid()
	end
end

-- DISABLE INVISIBILITY
function disableInvisibility()
	if not character then return end
	
	-- Restore sizes
	for part, size in pairs(originalSizes) do
		if part and part.Parent then
			part.Size = size
		end
	end
	originalSizes = {}
	
	-- Restore position
	if originalCFrame and hrp then
		hrp.CFrame = originalCFrame
		originalCFrame = nil
	end
	
	-- Disable noclip
	if noclipConnection then
		noclipConnection:Disconnect()
		noclipConnection = nil
	end
	
	-- Restore collision
	if character then
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") then
				part.CanCollide = true
				part.Transparency = 0
			end
		end
	end
	
	-- Restore removed parts
	for name, partClone in pairs(removedParts) do
		if character then
			local newPart = partClone:Clone()
			newPart.Parent = character
		end
	end
	removedParts = {}
	
	statusLabel.Text = "Status: Ready\nMethod: " .. currentMethod:upper() .. "\nTools: Functional"
end

-- Anti-Kick System (Keep character alive)
spawn(function()
	while true do
		wait(1)
		
		if antiKickEnabled and invisEnabled and humanoid then
			-- Prevent AFK kick
			humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
			task.wait(0.1)
			humanoid:ChangeState(Enum.HumanoidStateType.Landing)
		end
	end
end)

-- Main Toggle
toggleBtn.Activated:Connect(function()
	invisEnabled = not invisEnabled
	
	if invisEnabled then
		toggleBtn.Text = "üëª ENABLED"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(150, 100, 255)
		statusDot.BackgroundColor3 = Color3.fromRGB(150, 100, 255)
		
		enableInvisibility()
	else
		toggleBtn.Text = "üëª DISABLED"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
		statusDot.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
		
		disableInvisibility()
	end
end)

print("===========================================")
print("Multi-Universal Invisible [TRUE INVISIBILITY]")
print("===========================================")
print("‚úÖ METHOD 1: SHRINK (Size = 0.001)")
print("‚úÖ METHOD 2: UNDERGROUND (Y -500 + Noclip)")
print("‚úÖ METHOD 3: REMOVE PARTS (Delete Body)")
print("‚úÖ METHOD 4: HYBRID (Multi-Method)")
print("‚úÖ Anti-Kick Protection")
print("‚úÖ Tools Remain Functional!")
print("‚úÖ SERVER-SIDE - Others CAN'T See You!")
print("===========================================")
